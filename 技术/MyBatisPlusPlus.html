<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>MyBatisPlusPlus | 沈金勇的博客</title>
    <meta name="description" content="javaboy的文档库">
    <link rel="stylesheet" href="/javaboy/assets/style.0da82785.css">
    <link rel="modulepreload" href="/javaboy/assets/app.f2d0f4fd.js">
    <link rel="modulepreload" href="/javaboy/assets/技术_MyBatisPlusPlus.md.18c05cb7.lean.js">
    
    <script id="check-dark-light">(()=>{const e=localStorage.getItem("vitepress-theme-appearance"),a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-c6a644e1><!--[--><!--]--><!--[--><span tabindex="-1" data-v-151f2593></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-151f2593> Skip to content </a><!--]--><!----><header class="VPNav no-sidebar" data-v-c6a644e1 data-v-a71a30f1><div class="VPNavBar" data-v-a71a30f1 data-v-6f1d18b5><div class="container" data-v-6f1d18b5><div class="VPNavBarTitle" data-v-6f1d18b5 data-v-d5925166><a class="title" href="/javaboy/" data-v-d5925166><!--[--><!--]--><!--[--><img class="VPImage logo" src="/javaboy/logo.png" data-v-e13a1912><!--]--><!--[-->javaboy<!--]--><!--[--><!--]--></a></div><div class="content" data-v-6f1d18b5><!--[--><!--]--><!----><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-6f1d18b5 data-v-f83db6ba><span id="main-nav-aria-label" class="visually-hidden" data-v-f83db6ba>Main Navigation</span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/javaboy/" data-v-f83db6ba data-v-47a2263e data-v-3c355974><!--[-->主页<!--]--><!----></a><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-f83db6ba data-v-6ffb57d3><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-6ffb57d3><span class="text" data-v-6ffb57d3><!----> 力扣 <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-6ffb57d3><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-6ffb57d3><div class="VPMenu" data-v-6ffb57d3 data-v-1c5d0cfc><div class="items" data-v-1c5d0cfc><!--[--><!--[--><div class="VPMenuLink" data-v-1c5d0cfc data-v-e8e0fb1d><a class="VPLink link" href="/javaboy/%E5%8A%9B%E6%89%A3/1.%E4%B8%A4%E6%95%B0%E4%B9%8B%E5%92%8C.html" data-v-e8e0fb1d data-v-3c355974><!--[-->1.两数之和<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-1c5d0cfc data-v-e8e0fb1d><a class="VPLink link" href="/javaboy/%E5%8A%9B%E6%89%A3/2.%E4%B8%A4%E6%95%B0%E7%9B%B8%E5%8A%A0.html" data-v-e8e0fb1d data-v-3c355974><!--[-->2.两数相加<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-1c5d0cfc data-v-e8e0fb1d><a class="VPLink link" href="/javaboy/%E5%8A%9B%E6%89%A3/3.%E6%97%A0%E9%87%8D%E5%A4%8D%E5%AD%97%E7%AC%A6%E7%9A%84%E6%9C%80%E9%95%BF%E5%AD%90%E4%B8%B2.html" data-v-e8e0fb1d data-v-3c355974><!--[-->3.无重复字符的最长子串<!--]--><!----></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-f83db6ba data-v-6ffb57d3><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-6ffb57d3><span class="text" data-v-6ffb57d3><!----> 技术 <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-6ffb57d3><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-6ffb57d3><div class="VPMenu" data-v-6ffb57d3 data-v-1c5d0cfc><div class="items" data-v-1c5d0cfc><!--[--><!--[--><div class="VPMenuLink" data-v-1c5d0cfc data-v-e8e0fb1d><a class="VPLink link" href="/javaboy/%E6%8A%80%E6%9C%AF/Spring.html" data-v-e8e0fb1d data-v-3c355974><!--[-->Spring<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-1c5d0cfc data-v-e8e0fb1d><a class="VPLink link" href="/javaboy/%E6%8A%80%E6%9C%AF/SpringMVC.html" data-v-e8e0fb1d data-v-3c355974><!--[-->SpringMVC<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-1c5d0cfc data-v-e8e0fb1d><a class="VPLink link" href="/javaboy/%E6%8A%80%E6%9C%AF/SpringBoot.html" data-v-e8e0fb1d data-v-3c355974><!--[-->SpringBoot<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-1c5d0cfc data-v-e8e0fb1d><a class="VPLink link" href="/javaboy/%E6%8A%80%E6%9C%AF/MyBatis.html" data-v-e8e0fb1d data-v-3c355974><!--[-->MyBatis<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-1c5d0cfc data-v-e8e0fb1d><a class="VPLink link" href="/javaboy/%E6%8A%80%E6%9C%AF/MyBatisPlus.html" data-v-e8e0fb1d data-v-3c355974><!--[-->MyBatisPlus<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-1c5d0cfc data-v-e8e0fb1d><a class="VPLink link active" href="/javaboy/%E6%8A%80%E6%9C%AF/MyBatisPlusPlus.html" data-v-e8e0fb1d data-v-3c355974><!--[-->MyBatisPlusPlus<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-1c5d0cfc data-v-e8e0fb1d><a class="VPLink link" href="/javaboy/%E6%8A%80%E6%9C%AF/Knife4j.html" data-v-e8e0fb1d data-v-3c355974><!--[-->Knife4j<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-1c5d0cfc data-v-e8e0fb1d><a class="VPLink link" href="/javaboy/%E6%8A%80%E6%9C%AF/Shiro.html" data-v-e8e0fb1d data-v-3c355974><!--[-->Shiro<!--]--><!----></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-f83db6ba data-v-6ffb57d3><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-6ffb57d3><span class="text" data-v-6ffb57d3><!----> 实战 <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-6ffb57d3><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-6ffb57d3><div class="VPMenu" data-v-6ffb57d3 data-v-1c5d0cfc><div class="items" data-v-1c5d0cfc><!--[--><!--[--><div class="VPMenuLink" data-v-1c5d0cfc data-v-e8e0fb1d><a class="VPLink link" href="/javaboy/%E5%AE%9E%E6%88%98/%E6%B5%8B%E8%AF%95%E7%94%A8%E4%BE%8B%E5%92%8C%E6%96%87%E6%A1%A3.html" data-v-e8e0fb1d data-v-3c355974><!--[-->测试用例和文档<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-1c5d0cfc data-v-e8e0fb1d><a class="VPLink link" href="/javaboy/%E5%AE%9E%E6%88%98/%E4%BF%A1%E5%88%9B.html" data-v-e8e0fb1d data-v-3c355974><!--[-->信创<!--]--><!----></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-6f1d18b5 data-v-a3e7452b><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" aria-label="toggle dark mode" aria-checked="false" data-v-a3e7452b data-v-1899cd41 data-v-086e8519><span class="check" data-v-086e8519><span class="icon" data-v-086e8519><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-1899cd41><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-1899cd41><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-6f1d18b5 data-v-738bef5a data-v-f6988cfb><!--[--><a class="VPSocialLink" href="https://github.com/ShenJinyong" target="_blank" rel="noopener" data-v-f6988cfb data-v-e57698f6><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-6f1d18b5 data-v-e4361c82 data-v-6ffb57d3><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-6ffb57d3><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon" data-v-6ffb57d3><circle cx="12" cy="12" r="2"></circle><circle cx="19" cy="12" r="2"></circle><circle cx="5" cy="12" r="2"></circle></svg></button><div class="menu" data-v-6ffb57d3><div class="VPMenu" data-v-6ffb57d3 data-v-1c5d0cfc><!----><!--[--><!--[--><!----><div class="group" data-v-e4361c82><div class="item appearance" data-v-e4361c82><p class="label" data-v-e4361c82>Appearance</p><div class="appearance-action" data-v-e4361c82><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" aria-label="toggle dark mode" aria-checked="false" data-v-e4361c82 data-v-1899cd41 data-v-086e8519><span class="check" data-v-086e8519><span class="icon" data-v-086e8519><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-1899cd41><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-1899cd41><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div></div></div><div class="group" data-v-e4361c82><div class="item social-links" data-v-e4361c82><div class="VPSocialLinks social-links-list" data-v-e4361c82 data-v-f6988cfb><!--[--><a class="VPSocialLink" href="https://github.com/ShenJinyong" target="_blank" rel="noopener" data-v-f6988cfb data-v-e57698f6><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-6f1d18b5 data-v-e5dd9c1c><span class="container" data-v-e5dd9c1c><span class="top" data-v-e5dd9c1c></span><span class="middle" data-v-e5dd9c1c></span><span class="bottom" data-v-e5dd9c1c></span></span></button></div></div></div><!----></header><!----><!----><div class="VPContent" id="VPContent" data-v-c6a644e1 data-v-c95df128><div class="VPDoc has-aside" data-v-c95df128 data-v-37ebe389><div class="container" data-v-37ebe389><div class="aside" data-v-37ebe389><div class="aside-curtain" data-v-37ebe389></div><div class="aside-container" data-v-37ebe389><div class="aside-content" data-v-37ebe389><div class="VPDocAside" data-v-37ebe389 data-v-afc4c1a1><!--[--><!--]--><!--[--><!--]--><div class="VPDocAsideOutline" data-v-afc4c1a1 data-v-2865c0b0><div class="content" data-v-2865c0b0><div class="outline-marker" data-v-2865c0b0></div><div class="outline-title" data-v-2865c0b0>On this page</div><nav aria-labelledby="doc-outline-aria-label" data-v-2865c0b0><span class="visually-hidden" id="doc-outline-aria-label" data-v-2865c0b0> Table of Contents for current page </span><ul class="root" data-v-2865c0b0 data-v-1188541a><!--[--><!--]--></ul></nav></div></div><!--[--><!--]--><div class="spacer" data-v-afc4c1a1></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-37ebe389><div class="content-container" data-v-37ebe389><!--[--><!--]--><main class="main" data-v-37ebe389><div style="position:relative;" class="vp-doc _javaboy_%E6%8A%80%E6%9C%AF_MyBatisPlusPlus" data-v-37ebe389><div><h1 id="mybatisplusplus" tabindex="-1">MyBatisPlusPlus <a class="header-anchor" href="#mybatisplusplus" aria-hidden="true">#</a></h1><p>gitee地址：<code>https://gitee.com/jeffreyning/mybatisplus-plus</code></p><p>github地址：<code>https://github.com/jeffreyning/mybatisplus-plus</code></p><p>说明：mybatisplus-plus对mybatisplus的一些功能补充</p><h2 id="根据多个字段联合主键增删改查" tabindex="-1">根据多个字段联合主键增删改查 <a class="header-anchor" href="#根据多个字段联合主键增删改查" aria-hidden="true">#</a></h2><p>原生mybatisplus只支持一个主键，mpp支持多个字段联合主键（复合主键）增删改查，mapper需要继承MppBaseMapper 实体类中联合主键的字段需要用@MppMultiId注解修饰 如果需要在service使用多主键相关操作包括saveOrUpdateByMultiId和批量操作updateBatchByMultiId和saveOrUpdateBatchByMultiId，可以直接继承IMppService接口</p><h2 id="优化分页插件实现在不分页时进行排序操作" tabindex="-1">优化分页插件实现在不分页时进行排序操作 <a class="header-anchor" href="#优化分页插件实现在不分页时进行排序操作" aria-hidden="true">#</a></h2><p>原生mybatisplus分页与排序是绑定的，mpp优化了分页插件，使用MppPaginationInterceptor插件 在不分页的情况下支持排序操作 page参数size设置为-1可实现不分页取全量数据，同时设置OrderItem可以实现排序</p><h2 id="自动填充优化功能-自动扫描entity类构建resultmap功能" tabindex="-1">自动填充优化功能 &amp; 自动扫描Entity类构建ResultMap功能 <a class="header-anchor" href="#自动填充优化功能-自动扫描entity类构建resultmap功能" aria-hidden="true">#</a></h2><p>原生mybatisplus只能做%s+1和now两种填充，mybatisplus-plus在插入或更新时对指定字段进行自定义复杂sql填充。 需要在实体类字段上用原生注解@TableField设置fill=FieldFill.INSERT fill=FieldFill.UPDATE或fill=FieldFill.INSERT_UPDATE否则不会触发自定义填充 mybatisplus-plus使用@InsertFill注解触发插入时，执行注解中自定义的sql填充实体类字段 mybatisplus-plus使用@UpdateFill注解触发更新时，执行注解中自定义的sql填充实体类字段 还可以自动填充主键字段,解决原生mybatisplus不支持多个主键的问题 使用ColNameUtil.pn静态方法，获取实体类中读取方法对应的列名称</p><p>在xml中编写resultmap是件头痛的事，特别是表连接时返回的对象是多样的，如果不按照map返回，分别建resultmap工作量会翻倍。 使用@AutoMap注解entity实体类，就可以在应用启动时解析使用@TableField注解的字段，自动生成scan.mybatis-plus_xxxx为id的resultMap 可以在xml中直接配置使用这个resultMap实例 并且还支持继承关系，扫描实体子类会附加上父类的字段信息一起构建子类的resultmap 对于各种表连接形成的返回实体对象，可以通过继承来生成。通过扫描后自动构建各种resultmap，在xml中引用。</p><p>做连表查询时，输入参数往往不是单一的实体类，而是采用更灵活的Map对象， 但map中key参数的名称定义过于随便，可以使用接口定义常量。但原生mybatis在xml中调用静态类方法和变量时需要填写完整的包名不利于大量采用 是否可以像在mybatisplus中使用lambda表达式翻译entity中的列名称 mpp做了封装支持xml的ognl中引入默认包名(为了兼容jdk11 mpp1.7.0的ognl默认包名功能已经删除)，并支持lambda定义列名称 例如xml使用以下语句引入map参数中create_time 原生方式</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">#{create_time}</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>mpp的默认包名引用接口常量方式(1.7.0此配置已经删除) 配置文件中mpp.utilBasePath可设置ognl默认包名</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">#{${@ColInfo@createTime}}</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>mpp的lambda方式(1.7.0中使用@com.MPP@col)</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">#{${@MPP@col(&quot;TestEntity::getCreateTime&quot;)}}</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p><strong>从中央库引入jar</strong></p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">    &lt;dependency&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">        &lt;groupId&gt;com.github.jeffreyning&lt;/groupId&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">        &lt;artifactId&gt;mybatisplus-plus&lt;/artifactId&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">        &lt;version&gt;1.5.1-RELEASE&lt;/version&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    &lt;/dependency&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p><strong>在实体类上设置@KeySequence，在插入时对id字段自动填充复杂计算值</strong></p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">@KeySequence(&quot;select lpad(max(seqno)+3,10,&#39;0&#39;) from test&quot;)</span></span>
<span class="line"><span style="color:#A6ACCD;">@TableName(value = &quot;test&quot;)</span></span>
<span class="line"><span style="color:#A6ACCD;">public class TestEntity {</span></span>
<span class="line"><span style="color:#A6ACCD;">    @TableId(value = &quot;id&quot;, type=IdType.INPUT)</span></span>
<span class="line"><span style="color:#A6ACCD;">    private Integer id;</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p><strong>1.5.1版本之后需使用@EnableAutoFill注解整体开启自动注入功能</strong> <strong>在实体类字段上设置@InsertFill @UpdateFill，插入和更新时使用当前时间填充</strong></p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">    @InsertFill(&quot;select now()&quot;)</span></span>
<span class="line"><span style="color:#A6ACCD;">    @UpdateFill(&quot;select now()&quot;)</span></span>
<span class="line"><span style="color:#A6ACCD;">    @TableField(value=&quot;update_time&quot;,fill=FieldFill.INSERT_UPDATE)</span></span>
<span class="line"><span style="color:#A6ACCD;">    private Date updateTime;</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p><strong>在实体类字段上设置@InsertFill，在插入时对seqno字段自动填充复杂计算值</strong> 查询当前最大的seqno值并加3，转换成10位字符串，不够位数时用0填充</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">    @TableField(value=&quot;seqno&quot;,fill=FieldFill.INSERT )</span></span>
<span class="line"><span style="color:#A6ACCD;">    @InsertFill(&quot;select lpad(max(seqno)+3,10,&#39;0&#39;) from test&quot;)</span></span>
<span class="line"><span style="color:#A6ACCD;">    private String seqno;</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p><strong>在启动类中使用@EnableMPP启动扩展自定义填充功能和自动创建resultmap功能</strong> <strong>在启动类中使用@EnableKeyGen启动主键自定义主键填充功能</strong> 注意如果自己实现了IKeyGenerator会与@EnableKeyGen冲突</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">@SpringBootApplication</span></span>
<span class="line"><span style="color:#A6ACCD;">@EnableMPP</span></span>
<span class="line"><span style="color:#A6ACCD;">@EnableKeyGen</span></span>
<span class="line"><span style="color:#A6ACCD;">public class PlusDemoApplication {</span></span>
<span class="line"><span style="color:#A6ACCD;">    public static void main(String[] args) {</span></span>
<span class="line"><span style="color:#A6ACCD;">        SpringApplication.run(PlusDemoApplication.class, args);</span></span>
<span class="line"><span style="color:#A6ACCD;">    }</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p><strong>在实体类上使用@AutoMap注解</strong> JoinEntity是TestEntity的子类 @TableName(autoResultMap=true) autoResultMap必须设置为true 父类可以不加@AutoMap，父类设置autoResultMap=true时mybatisplus负责生成resultmap 但原生mybatisplus生成的resultmap的id为mybatis-plus_xxxx没有scan.前缀</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">@AutoMap</span></span>
<span class="line"><span style="color:#A6ACCD;">@TableName(autoResultMap=true)</span></span>
<span class="line"><span style="color:#A6ACCD;">public class JoinEntity extends TestEntity{</span></span>
<span class="line"><span style="color:#A6ACCD;">    @TableField(&quot;some2&quot;)</span></span>
<span class="line"><span style="color:#A6ACCD;">    private String some2;</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">    public String getSome2() {</span></span>
<span class="line"><span style="color:#A6ACCD;">        return some2;</span></span>
<span class="line"><span style="color:#A6ACCD;">    }</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">    public void setSome2(String some2) {</span></span>
<span class="line"><span style="color:#A6ACCD;">        this.some2 = some2;</span></span>
<span class="line"><span style="color:#A6ACCD;">    }</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">    @Override</span></span>
<span class="line"><span style="color:#A6ACCD;">    public String toString() {</span></span>
<span class="line"><span style="color:#A6ACCD;">        return &quot;JoinEntity{&quot; +</span></span>
<span class="line"><span style="color:#A6ACCD;">                &quot;some2=&#39;&quot; + some2 + &#39;\&#39;&#39; +</span></span>
<span class="line"><span style="color:#A6ACCD;">                &#39;}&#39;;</span></span>
<span class="line"><span style="color:#A6ACCD;">    }</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p><strong>配置文件中加入扫描entity路径，多个路径用逗号分隔</strong></p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">mpp:</span></span>
<span class="line"><span style="color:#A6ACCD;">  entityBasePath: com.github.jeffreyning.mybatisplus.demo.entity</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p><strong>配置文件中加入ognl执行java静态方法的类加载默认路径，多个路径用逗号分隔(1.7.0此配置已经删除)</strong></p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">mpp:</span></span>
<span class="line"><span style="color:#A6ACCD;">  utilBasePath: com.github.jeffreyning.mybatisplus.demo.common</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p><strong>xml文件中引入自动生成的resultMap &amp; xml中使用省略包名调用静态方法（1.7.0省略包名已经删除，使用com.MPP） &amp; @com.MPP@col通过entity的lambda表达式翻译列名</strong></p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">&lt;!DOCTYPE mapper PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot; &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">&lt;mapper namespace=&quot;com.github.jeffreyning.mybatisplus.demo.mapper.TestMapper&quot;&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    &lt;select id=&quot;queryUseRM&quot; resultMap=&quot;scan.mybatis-plus_JoinEntity&quot;&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">        select * from test inner join test2 on test.id=test2.refid</span></span>
<span class="line"><span style="color:#A6ACCD;">    &lt;/select&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    &lt;select id=&quot;queryUse&quot; resultMap=&quot;scan.mybatis-plus_JoinEntity&quot;&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">        select * from test inner join test2 on test.id=test2.refid</span></span>
<span class="line"><span style="color:#A6ACCD;">        where test.create_time &lt;![CDATA[ &lt;= ]]&gt; #{${@com.MPP@col(&quot;TestEntity::getCreateTime&quot;)}}</span></span>
<span class="line"><span style="color:#A6ACCD;">        and test.id=#{${@com.MPP@col(&quot;TestEntity::getId&quot;)}}</span></span>
<span class="line"><span style="color:#A6ACCD;">    &lt;/select&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">&lt;/mapper&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p><strong>接口直接返回实例类</strong></p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">@Mapper</span></span>
<span class="line"><span style="color:#A6ACCD;">public interface TestMapper extends BaseMapper&lt;TestEntity&gt; {</span></span>
<span class="line"><span style="color:#A6ACCD;">    public List&lt;JoinEntity&gt; queryUseRM();</span></span>
<span class="line"><span style="color:#A6ACCD;">    public List&lt;JoinEntity&gt; queryUse(Map param);</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p><strong>使用ColNameUtil.pn静态方法，获取实体类中读取方法对应的列名称</strong></p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">       System.out.println(ColNameUtil.pn(TestEntity::getCreateTime));</span></span>
<span class="line"><span style="color:#A6ACCD;">       System.out.println(ColNameUtil.pn(TestEntity::getId));</span></span>
<span class="line"><span style="color:#A6ACCD;">       System.out.println(ColNameUtil.pn(JoinEntity::getSome2));</span></span>
<span class="line"><span style="color:#A6ACCD;">       System.out.println(ColNameUtil.pn(JoinEntity::getUpdateTime));</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p><strong>根据多个字段联合主键增删改查</strong> 在实例类成员变量上使用@MppMultiId表明联合主键</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">@TableName(&quot;test07&quot;)</span></span>
<span class="line"><span style="color:#A6ACCD;">public class Test07Entity {</span></span>
<span class="line"><span style="color:#A6ACCD;">    @MppMultiId</span></span>
<span class="line"><span style="color:#A6ACCD;">    @TableField(value = &quot;k1&quot;)</span></span>
<span class="line"><span style="color:#A6ACCD;">    private Integer k1;</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">    @MppMultiId</span></span>
<span class="line"><span style="color:#A6ACCD;">    @TableField(value = &quot;k2&quot;)</span></span>
<span class="line"><span style="color:#A6ACCD;">    private String k2;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#A6ACCD;">    @TableField(value = &quot;col1&quot;)</span></span>
<span class="line"><span style="color:#A6ACCD;">    private String col1;</span></span>
<span class="line"><span style="color:#A6ACCD;">    @TableField(value = &quot;col2&quot;)</span></span>
<span class="line"><span style="color:#A6ACCD;">    private String col2;    </span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>mapper需要继承MppBaseMapper</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">@Mapper</span></span>
<span class="line"><span style="color:#A6ACCD;">public interface Test07Mapper extends MppBaseMapper&lt;Test07Entity&gt; {</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>根据多主键增删改查</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">    public void testMultiId(){</span></span>
<span class="line"><span style="color:#A6ACCD;">        //id</span></span>
<span class="line"><span style="color:#A6ACCD;">        Test07Entity idEntity=new Test07Entity();</span></span>
<span class="line"><span style="color:#A6ACCD;">        idEntity.setK1(1);</span></span>
<span class="line"><span style="color:#A6ACCD;">        idEntity.setK2(&quot;111&quot;);</span></span>
<span class="line"><span style="color:#A6ACCD;">        //del</span></span>
<span class="line"><span style="color:#A6ACCD;">        test07Mapper.deleteByMultiId(idEntity);</span></span>
<span class="line"><span style="color:#A6ACCD;">        //add</span></span>
<span class="line"><span style="color:#A6ACCD;">        test07Mapper.insert(idEntity);</span></span>
<span class="line"><span style="color:#A6ACCD;">        //query</span></span>
<span class="line"><span style="color:#A6ACCD;">        Test07Entity retEntity=test07Mapper.selectByMultiId(idEntity);</span></span>
<span class="line"><span style="color:#A6ACCD;">        retEntity.setCol1(&quot;xxxx&quot;);</span></span>
<span class="line"><span style="color:#A6ACCD;">        //update</span></span>
<span class="line"><span style="color:#A6ACCD;">        test07Mapper.updateByMultiId(retEntity);</span></span>
<span class="line"><span style="color:#A6ACCD;">    }</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>service层继承IMppService接口和MppServiceImpl</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">public interface Test07Service extends IMppService&lt;Test07Entity&gt; {</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">public class Test07ServiceImpl extends MppServiceImpl&lt;Test07Mapper, Test07Entity&gt; implements Test07Service {</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>在service层调用多主键操作</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">    public void testMultiIdService(){</span></span>
<span class="line"><span style="color:#A6ACCD;">        //id</span></span>
<span class="line"><span style="color:#A6ACCD;">        Test07Entity idEntity=new Test07Entity();</span></span>
<span class="line"><span style="color:#A6ACCD;">        idEntity.setK1(1);</span></span>
<span class="line"><span style="color:#A6ACCD;">        idEntity.setK2(&quot;111&quot;);</span></span>
<span class="line"><span style="color:#A6ACCD;">        //del</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">        test07Service.deleteByMultiId(idEntity);</span></span>
<span class="line"><span style="color:#A6ACCD;">        //add</span></span>
<span class="line"><span style="color:#A6ACCD;">        test07Service.save(idEntity);</span></span>
<span class="line"><span style="color:#A6ACCD;">        //query</span></span>
<span class="line"><span style="color:#A6ACCD;">        Test07Entity retEntity=test07Service.selectByMultiId(idEntity);</span></span>
<span class="line"><span style="color:#A6ACCD;">        retEntity.setCol1(&quot;xxxx&quot;);</span></span>
<span class="line"><span style="color:#A6ACCD;">        //update</span></span>
<span class="line"><span style="color:#A6ACCD;">        test07Mapper.updateByMultiId(retEntity);</span></span>
<span class="line"><span style="color:#A6ACCD;">    }</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>根据复合主键进行批量操作和saveOrUpdate操作</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">    @Test</span></span>
<span class="line"><span style="color:#A6ACCD;">    public void testSaveOrUpdateByMultiIdService(){</span></span>
<span class="line"><span style="color:#A6ACCD;">        //id</span></span>
<span class="line"><span style="color:#A6ACCD;">        Test07Entity idEntity=new Test07Entity();</span></span>
<span class="line"><span style="color:#A6ACCD;">        idEntity.setK1(6);</span></span>
<span class="line"><span style="color:#A6ACCD;">        idEntity.setK2(&quot;666&quot;);</span></span>
<span class="line"><span style="color:#A6ACCD;">        //del</span></span>
<span class="line"><span style="color:#A6ACCD;">        test07Service.deleteByMultiId(idEntity);</span></span>
<span class="line"><span style="color:#A6ACCD;">        //add</span></span>
<span class="line"><span style="color:#A6ACCD;">        test07Service.saveOrUpdateByMultiId(idEntity);</span></span>
<span class="line"><span style="color:#A6ACCD;">        //update</span></span>
<span class="line"><span style="color:#A6ACCD;">        idEntity.setCol1(&quot;ccccc&quot;);</span></span>
<span class="line"><span style="color:#A6ACCD;">        test07Service.saveOrUpdateByMultiId(idEntity);</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">    }</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">    @Test</span></span>
<span class="line"><span style="color:#A6ACCD;">    public void testSaveOrUpdateBatchByMultiIdService(){</span></span>
<span class="line"><span style="color:#A6ACCD;">        //ids</span></span>
<span class="line"><span style="color:#A6ACCD;">        List&lt;Test07Entity&gt; entityList=new ArrayList&lt;Test07Entity&gt;();</span></span>
<span class="line"><span style="color:#A6ACCD;">        for(int i=10;i&lt;30;i++){</span></span>
<span class="line"><span style="color:#A6ACCD;">            Test07Entity idEntity=new Test07Entity();</span></span>
<span class="line"><span style="color:#A6ACCD;">            idEntity.setK1(i);</span></span>
<span class="line"><span style="color:#A6ACCD;">            idEntity.setK2(String.valueOf(i*10));</span></span>
<span class="line"><span style="color:#A6ACCD;">            entityList.add(idEntity);</span></span>
<span class="line"><span style="color:#A6ACCD;">        }</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">        //del</span></span>
<span class="line"><span style="color:#A6ACCD;">        for(Test07Entity idEntity:entityList) {</span></span>
<span class="line"><span style="color:#A6ACCD;">            test07Service.deleteByMultiId(idEntity);</span></span>
<span class="line"><span style="color:#A6ACCD;">        }</span></span>
<span class="line"><span style="color:#A6ACCD;">        //add batch</span></span>
<span class="line"><span style="color:#A6ACCD;">        test07Service.saveOrUpdateBatchByMultiId(entityList);</span></span>
<span class="line"><span style="color:#A6ACCD;">        //del</span></span>
<span class="line"><span style="color:#A6ACCD;">        for(Test07Entity idEntity:entityList) {</span></span>
<span class="line"><span style="color:#A6ACCD;">            idEntity.setCol1(new Date().toString());</span></span>
<span class="line"><span style="color:#A6ACCD;">        }</span></span>
<span class="line"><span style="color:#A6ACCD;">        //update batch</span></span>
<span class="line"><span style="color:#A6ACCD;">        test07Service.saveOrUpdateBatchByMultiId(entityList);</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">    }</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">    @Test</span></span>
<span class="line"><span style="color:#A6ACCD;">    public void testUpdateBatchByMultiIdService(){</span></span>
<span class="line"><span style="color:#A6ACCD;">        //ids</span></span>
<span class="line"><span style="color:#A6ACCD;">        List&lt;Test07Entity&gt; entityList=new ArrayList&lt;Test07Entity&gt;();</span></span>
<span class="line"><span style="color:#A6ACCD;">        for(int i=50;i&lt;80;i++){</span></span>
<span class="line"><span style="color:#A6ACCD;">            Test07Entity idEntity=new Test07Entity();</span></span>
<span class="line"><span style="color:#A6ACCD;">            idEntity.setK1(i);</span></span>
<span class="line"><span style="color:#A6ACCD;">            idEntity.setK2(String.valueOf(i*10));</span></span>
<span class="line"><span style="color:#A6ACCD;">            entityList.add(idEntity);</span></span>
<span class="line"><span style="color:#A6ACCD;">        }</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">        //del</span></span>
<span class="line"><span style="color:#A6ACCD;">        for(Test07Entity idEntity:entityList) {</span></span>
<span class="line"><span style="color:#A6ACCD;">            test07Service.deleteByMultiId(idEntity);</span></span>
<span class="line"><span style="color:#A6ACCD;">        }</span></span>
<span class="line"><span style="color:#A6ACCD;">        //add batch</span></span>
<span class="line"><span style="color:#A6ACCD;">        test07Service.saveOrUpdateBatchByMultiId(entityList);</span></span>
<span class="line"><span style="color:#A6ACCD;">        //del</span></span>
<span class="line"><span style="color:#A6ACCD;">        for(Test07Entity idEntity:entityList) {</span></span>
<span class="line"><span style="color:#A6ACCD;">            idEntity.setCol1(new Date().toString());</span></span>
<span class="line"><span style="color:#A6ACCD;">        }</span></span>
<span class="line"><span style="color:#A6ACCD;">        //update batch</span></span>
<span class="line"><span style="color:#A6ACCD;">        test07Service.updateBatchByMultiId(entityList);</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">    }</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p><strong>优化分页插件实现在不分页时进行排序操作（1.6.0版本已删除）</strong> 使用MppPaginationInterceptor插件</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">    @Bean</span></span>
<span class="line"><span style="color:#A6ACCD;">    public PaginationInterceptor paginationInterceptor() {</span></span>
<span class="line"><span style="color:#A6ACCD;">        return new MppPaginationInterceptor();</span></span>
<span class="line"><span style="color:#A6ACCD;">    }</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>mapper中按照一般分页接口定义，同时支持返回值为list或page对象的写法</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">@Mapper</span></span>
<span class="line"><span style="color:#A6ACCD;">public interface TestMapper extends BaseMapper&lt;TestEntity&gt; {</span></span>
<span class="line"><span style="color:#A6ACCD;">    public List&lt;JoinEntity&gt; queryUseRM(Page page);</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>page参数设置size=-1为全量查询，size&gt;0时正常分页，设置OrderItem进行无论是否分页都实现排序</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">    public void testOrder(){</span></span>
<span class="line"><span style="color:#A6ACCD;">        Page page=new Page();</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">        page.setSize(-1);</span></span>
<span class="line"><span style="color:#A6ACCD;">        page.addOrder(new OrderItem().setColumn(&quot;test.id&quot;).setAsc(true));</span></span>
<span class="line"><span style="color:#A6ACCD;">        page.addOrder(new OrderItem().setColumn(&quot;test2.some2&quot;).setAsc(true));</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">        List rp=testMapper.queryUseRM(page);</span></span>
<span class="line"><span style="color:#A6ACCD;">    }</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><h2 id="常见问题说明" tabindex="-1">常见问题说明 <a class="header-anchor" href="#常见问题说明" aria-hidden="true">#</a></h2><blockquote><p>报错Caused by: org.apache.ibatis.binding.BindingException: Invalid bound statement (not found):</p></blockquote><p>解决方法：在启动类中使用@EnableMPP注解，一般报Invalid bound statement (not found)都是没有使用@EnableMPP</p><blockquote><p>添加@EnableMPP后启动报错required a single bean, but 2 were found</p></blockquote><p>产生原因:添加@EnableMpp后会启用内置的metaObjectHandler实现类实现自动填充功能，如果旧项目中自行实现了metaObjectHandler会产生required a single bean类似冲突 解决方法:需删掉自定义的继承metaObjectHandler实现的填充功能</p><p><em>如果加了@EnableMPP后仍然报Invalid bound statement (not found)</em></p><p>需要检查是否实现了自定义的SqlSessionFactory，如果实现自定义的SqlSessionFactory则需要手工注入 MppSqlInjector（否则引发Invalid bound statement）, MppKeyGenerator(否则无法主键生成), DataAutoFill（否则无法自动填充） 自定义SqlSessionFactory注入示例如下</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">    public SqlSessionFactory sqlSessionFactory(DataSource dateSource, MybatisPlusProperties properties, MppSqlInjector mppSqlInjector, MppKeyGenerator mppKeyGenerator, DataAutoFill dataAutoFill) throws Exception {</span></span>
<span class="line"><span style="color:#A6ACCD;">        MybatisSqlSessionFactoryBean bean=new MybatisSqlSessionFactoryBean();</span></span>
<span class="line"><span style="color:#A6ACCD;">        GlobalConfig globalConfig = properties.getGlobalConfig();</span></span>
<span class="line"><span style="color:#A6ACCD;">        globalConfig.setSqlInjector(mppSqlInjector);</span></span>
<span class="line"><span style="color:#A6ACCD;">        globalConfig.setMetaObjectHandler(dataAutoFill);</span></span>
<span class="line"><span style="color:#A6ACCD;">        globalConfig.getDbConfig().setKeyGenerator(mppKeyGenerator);</span></span>
<span class="line"><span style="color:#A6ACCD;">        bean.setDataSource(dateSource);</span></span>
<span class="line"><span style="color:#A6ACCD;">        bean.setGlobalConfig(globalConfig);</span></span>
<span class="line"><span style="color:#A6ACCD;">        return bean.getObject();</span></span>
<span class="line"><span style="color:#A6ACCD;">    }</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p><em>启动时报异常NoSuchFieldException: modifiers</em></p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">org.springframework.beans.factory.BeanCreationException: </span></span>
<span class="line"><span style="color:#A6ACCD;">Error creating bean with name &#39;com.github.jeffreyning.mybatisplus.conf.PlusConfig&#39;: </span></span>
<span class="line"><span style="color:#A6ACCD;">Invocation of init method failed; nested exception is java.lang.NoSuchFieldException: modifiers</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>应该是jdk11与自定义ognl加载机制不兼容导致的。 mybatisplus-plus1.7.0删除了自定义ognl根路径功能，兼容jdk11。</p><p><em>报 not found column for &#39;id&#39;</em> mybatis-plus的问题，所有叫id的属性都自动注册为主键</p><p><em>启动时日志中有mpp.entityBasePath is null skip scan result map</em> 只是个提示不影响，不想看到提示，mpp.entityBasePath可以配置到entity的包如entityBasePath: com.github.jeffreyning.mybatisplus.demo.entity； 如果xml中有resultMap=&quot;scan.mybatis-plus_xxx&quot;才需要配置mpp.entityBasePath</p><p><em>提示java.lang.RuntimeException: not found column for &#39;xxx&#39;</em> 是由于设置了@MppMultiId的字段没有同时设置@TableField(value = &quot;xxx&quot;)导致的</p><p><em>如何整合pagehelper插件</em></p><p>mybatisplus本身有分页常见，如果一定要使用pagehelper插件的话，与原生的mybatisplus有冲突 解决方法为：使用以下代码加载pageHelper(版本为5.1.10)</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">    @Bean</span></span>
<span class="line"><span style="color:#A6ACCD;">    ConfigurationCustomizer mybatisConfigurationCustomizer() {</span></span>
<span class="line"><span style="color:#A6ACCD;">        return new ConfigurationCustomizer() {</span></span>
<span class="line"><span style="color:#A6ACCD;">            @Override</span></span>
<span class="line"><span style="color:#A6ACCD;">            public void customize(Configuration configuration) {</span></span>
<span class="line"><span style="color:#A6ACCD;">                configuration.addInterceptor(new com.github.pagehelper.PageInterceptor());</span></span>
<span class="line"><span style="color:#A6ACCD;">            }</span></span>
<span class="line"><span style="color:#A6ACCD;">        };</span></span>
<span class="line"><span style="color:#A6ACCD;">    }</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><h2 id="兼容性说明" tabindex="-1">兼容性说明 <a class="header-anchor" href="#兼容性说明" aria-hidden="true">#</a></h2><ul><li><p>mybatisplus-plus1.5.0兼容mybatisplus3.3.1(mybatis3.5.3)到最新版mybatisplus3.4.2(mybatis3.5.6)</p></li><li><p>mybatisplus-plus1.5.1与最高到mybatisplus3.4.3.1兼容</p><ul><li>mybatisplus-plus1.5.1与mybatisplus3.4.3不兼容，mybatisplus3.4.3自身有bug无法使用，报<code>sun.reflect.generics.reflectiveObjects.TypeVariableImpl cannot be cast to java.lang.Class</code></li><li>mybatisplus-plus1.5.1与mybatisplus3.4.3.2不兼容，报<code>org.apache.ibatis.binding.BindingException: Invalid bound statement (not found)</code></li></ul></li><li><p>mybatisplus-plus1.6.0与mybatisplus3.4.3.2+兼容（已经测试到mybatisplus3.4.3.4）</p></li><li><p>mybatisplus-plus1.7.0兼容jdk11(删除了自定义ognl根路径功能)</p></li></ul></div></div></main><!--[--><!--]--><footer class="VPDocFooter" data-v-37ebe389 data-v-a54a85bd><div class="edit-info" data-v-a54a85bd><!----><div class="last-updated" data-v-a54a85bd><p class="VPLastUpdated" data-v-a54a85bd data-v-f7d51a9c>Last updated: <time datatime="2023-03-07T04:50:47.000Z" data-v-f7d51a9c></time></p></div></div><!----></footer><!--[--><!--]--></div></div></div></div></div><footer class="VPFooter" data-v-c6a644e1 data-v-9f24cc86><div class="container" data-v-9f24cc86><!----><p class="copyright" data-v-9f24cc86>Copyright © 2018-2023 沈金勇</p></div></footer><!--[--><!--]--></div></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"index.md\":\"904484b1\",\"力扣_1.两数之和.md\":\"c8f3124d\",\"力扣_2.两数相加.md\":\"a0c40ecc\",\"力扣_3.无重复字符的最长子串.md\":\"f81dc4a2\",\"实战_信创.md\":\"1621026f\",\"实战_测试用例和文档.md\":\"f28149d0\",\"技术_knife4j.md\":\"71938640\",\"技术_mybatis.md\":\"a4b753bf\",\"技术_mybatisplus.md\":\"954de8f3\",\"技术_mybatisplusplus.md\":\"18c05cb7\",\"技术_shiro.md\":\"a0041cc2\",\"技术_spring.md\":\"e6e7a076\",\"技术_springboot.md\":\"ccfb3840\",\"技术_springmvc.md\":\"0be4e834\"}")</script>
    <script type="module" async src="/javaboy/assets/app.f2d0f4fd.js"></script>
    
  </body>
</html>