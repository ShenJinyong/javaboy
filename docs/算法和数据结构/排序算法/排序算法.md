# 排序算法

## 选择排序

时间复杂度：`O(N²)`；额外空间复杂度：`O(1)`

## 插入排序

时间复杂度：`O(N²)`；额外空间复杂度：`O(1)`

## 冒泡排序

时间复杂度：`O(N²)`；额外空间复杂度：`O(1)`

## 归并排序

时间复杂度：`O(NlogN)`；额外空间复杂度：`O(N)`

> 原理

1. 整体就是一个简单递归，左边排好序、右边排好序、让其整体有序
2. 让其整体有序的过程里用了外排序方法
3. 利用master公式来求解时间复杂度
4. 归并排序的实质

> 扩展:小和问题和逆序对问题

**小和问题**

在一个数组中，每一个数左边比当前数小的数累加起来，叫做这个数组的小和。

求一个数组的小和例子:[1,3,4,2,5] 1左边比1小的数，没有; 3左边比3小的数，1; 4左边比4小的数，1、3; 2左边比2小的数，1; 5左边比5小的数，1、3、4、2; 所以小和为1+1+3+1+1+3+4+2=16

**逆序对问题**

在一个数组中，左边的数如果比右边的数大，则这两个数构成一个逆序对，请打印所有逆序对。

## 快速排序

不改进的快速排序时间复杂度：`O(N²)`；额外空间复杂度：`O(N)`

改进的快速排序时间复杂度：`O(NlogN)`；额外空间复杂度：`O(logN)`

> 荷兰国旗问题

**问题一**

给定一个数组arr，和一个数num，请把小于等于num的数放在数 组的左边，大于num的数放在数组的右边。要求额外空间复杂度O(1)，时间复杂度O(N)

**问题二(荷兰国旗问题)**
给定一个数组arr，和一个数num，请把小于num的数放在数组的 左边，等于num的数放在数组的中间，大于num的数放在数组的 右边。要求额外空间复杂度O(1)，时间复杂度O(N)

> 不改进的快速排序

1. 把数组范围中的最后一个数作为划分值，然后把数组通过荷兰国旗问题分成三个部分：
   1. 左侧<划分值
   2. 中间==划分值
   3. 右侧>划分值
2. 对左侧范围和右侧范围，递归执行分析
   1. 划分值越靠近两侧，复杂度越高；划分值越靠近中间，复杂度越低
   2. 可以轻而易举的举出最差的例子，所以不改进的快速排序时间复杂度为O(N^2)

> 随机快速排序（改进的快速排序）

1. 在数组范围中，等概率随机选一个数作为划分值，然后把数组通过荷兰国旗问题分成三个部分：
   1. 左侧<划分值
   2. 中间==划分值
   3. 右侧>划分值
2. 对左侧范围和右侧范围，递归执行
3. 时间复杂度为O(N*logN)

## 堆排序

时间复杂度：`O(N*logN)`;额外空间复杂度：`O(1)`

> 原理

1. 先让整个数组都变成大根堆结构，建立堆的过程:
   1. 从上到下的方法，时间复杂度为O(N*logN)*
   2. 从下到上的方法，时间复杂度为O(N)
2. 把堆的最大值和堆末尾的值交换，然后减少堆的大小之后，再去调整堆，一直周而复始，时间复杂度为O(N*logN)
3. 堆的大小减小成0之后，排序完成

> 扩展

已知一个几乎有序的数组，几乎有序是指，如果把数组排好顺序的话，每个元素移动的距离可以不超过k，并且k相对于数组来说比较小。请选择一个合适的排序算法针对这个数据进行排序。

## 桶排序

桶排序思想下的排序：

1. 计数排序
2. 基数排序

分析：

1. 桶排序思想下的排序都是不基于比较的排序
2. 时间复杂度为O(N)，额外空间负载度O(M)
3. 应用范围有限，需要样本的数据状况满足桶的划分

## 总结

> 排序算法的稳定性及其汇总

同样值的个体之间，如果不因为排序而改变相对次序，就是这个排序是有稳定性的；否则就没有。

- 不具备稳定性的排序：
  - 选择排序、快速排序、堆排序

- 具备稳定性的排序：
  - 冒泡排序、插入排序、归并排序、一切桶排序思想下的排序

目前没有找到时间复杂度O(N*logN)，额外空间复杂度O(1)，又稳定的排序。

> 常见的坑

1. 归并排序的额外空间复杂度可以变成O(1)，但是非常难，不需要掌握，有兴趣可以搜“归并排序 内部缓存法”
2. 原地归并排序”的帖子都是垃圾，会让归并排序的时间复杂度变成O(N^2)
3. 快速排序可以做到稳定性问题，但是非常难，不需要掌握， 可以搜“01 stable sort”
4. 所有的改进都不重要，因为目前没有找到时间复杂度O(N*logN)，额外空间复杂度O(1)，又稳定的排序。
5. 有一道题目，是奇数放在数组左边，偶数放在数组右边，还要求原始的相对次序不变，碰到这个问题，可以怼面试官。

> 工程上对排序的改进

1. 充分利用O(N*logN)和O(N^2)排序各自的优势
2. 稳定性的考虑